<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--<link rel="stylesheet" href="css/normalize.css">-->
    <link href="https://fonts.googleapis.com/css?family=Oswald" rel="stylesheet">
    <!-- Your web-app is https, so your scripts need to be too -->
    <script src="https://code.jquery.com/jquery-2.2.1.min.js" integrity="sha256-gvQgAFzTH6trSrAWoH1iPo9Xc96QxSZ3feW6kem+O00=" crossorigin="anonymous"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->
    <link rel="stylesheet" type="text/css" href="css/styles.css">
    <script src="js/scripts.js"></script>
</head>

<body onload="init()">
    <nav class="navbar navbar-default" role="navigation">
        <button class="btn btn-default navbar-btn dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span> </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
            <li><a href="#"><i class="glyphicon glyphicon-question-sign"></i>  Home</a></li>
            <li> <a href="#"><i class="glyphicon glyphicon-question-sign"></i> Cafeterias</a></li>
            <a href="#"> </a>
            <li>
                <a href="#"> </a><a href="#"><i class="glyphicon glyphicon-question-sign"></i> Rooms</a></li>
            <a href="#"> </a>
            <li>
                <a href="#"> </a><a href="#"><i class="glyphicon glyphicon-question-sign"></i> How to use</a></li>
            <a href="#"> </a>
            <li>
                <a href="#"> </a><a href="#"><i class="glyphicon glyphicon-question-sign"></i> Others</a></li>
            <a href="#"> </a>
            <li>
                <a href="#"></a><a href="#"><i class="glyphicon glyphicon-question-sign"></i> Contact</a></li>
            <a href="#"> </a>
        </ul>
        <a class="navbar-brand" id="roomid"></a>
    </nav>
<!--
HEADER ENDS & MAP STARTS
-->
    <div id="map-wrapper">
			<img id="locator" class="img-responsive" src="img/f1.JPG"> </div>
    </div>

    <script type="text/javascript">
    $(document).ready(function() {
    	$.ajax({
    		url: '/api/rooms?roomName=c0083&organization=vamk',
    		type: 'get',
    		contentType: 'application/json; charset=UTF-8',
    		success: function(data) {
    			doTricksWithData(data)
    		},
    		error: function(error, textStatus, errorThrown) {
    			console.log(error)
    		}
    	})
    	function doTricksWithData(response) {
    		console.log('Response looks like this', response)
    		//Logging property 'name' of response object
    		console.log('Room name', response.name)
    		//Making sure that response has property 'organization'
    		//Otherwise it would lead to errors if trying to read
    		// property of undefined
    		if (response.hasOwnProperty('organization')) {
    			console.log("Organization name", response.organization.name)
    		}
    		if (response.hasOwnProperty('coordinates')) {
    			//Coordinates come in as an array, but index [0] is always valid
    			//Making sure that coordinates is type of Array and that it has data in it
    			if (response.coordinates.constructor === Array && response.coordinates.length > 0) {
    				console.log('Latitude', response.coordinates[0].latitude)
    				console.log('Longitude', response.coordinates[0].longitude)
    			}
    		}
    		if (response.hasOwnProperty('floor')) {
    			console.log('Floor name', response.floor.name)
    			console.log('Reference to floor base image:', response.floor.baseImage)
    			//Going even deeper
    			if (response.floor.hasOwnProperty('building')) {
    				console.log('Building name', response.floor.building.name)
    			}
    		}
    		console.log('Reference to room photo (maybe unnecessary)', response.photo)
    	}
    })
    </script>
</body>

</html>
